<!DOCTYPE html>
<html>
<head>
    <title>Login/Signup</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .form-group { margin: 10px 0; }
        .hidden { display: none; }
        .active { background: #ddd; }
        .tab { cursor: pointer; padding: 10px; }
    </style>
</head>
<body>
    <div class="tabs">
        <span class="tab active" onclick="showTab('login')">Login</span>
        <span class="tab" onclick="showTab('signup')">Signup</span>
    </div>

    <!-- Login Form -->
    <form id="loginForm" class="form">
        <div class="form-group">
            <input type="email" id="loginEmail" placeholder="Email" required>
        </div>
        <div class="form-group">
            <input type="password" id="loginPassword" placeholder="Password" required>
        </div>
        <button type="submit">Login</button>
    </form>

    <!-- Signup Form -->
    <form id="signupForm" class="form hidden">
        <div class="form-group">
            <input type="text" id="signupName" placeholder="Name" required>
        </div>
        <div class="form-group">
            <input type="email" id="signupEmail" placeholder="Email" required>
        </div>
        <div class="form-group">
            <input type="password" id="signupPassword" placeholder="Password" required>
        </div>
        <button type="submit">Sign Up</button>
    </form>

    <div id="message"></div>
    <h3>Users List</h3>
    <table id="usersTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Password</th>
            </tr>
        </thead>
        <tbody id="usersBody"></tbody>
    </table>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyqbmjLK_Qw419VPzlfZRHw1IbGAwWGZTkbnwDBkyzl-UVCvnLnLO-o7KUIxU1FOlU98g/exec';

        // Toggle between Login/Signup forms
        function showTab(tabName) {
            document.querySelectorAll('.form').forEach(form => form.classList.add('hidden'));
            document.getElementById(`${tabName}Form`).classList.remove('hidden');
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Login
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            fetch(SCRIPT_URL, {
                method: 'POST',
                body: JSON.stringify({
                    action: "login",
                    email: email,
                    password: password
                })
            })
            .then(response => response.text())
            .then(result => {
                document.getElementById('message').textContent = result;
                if (result === "Login successful!") loadUsers();
            });
        });

        // Signup
        document.getElementById('signupForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const data = {
                action: "signup",
                name: document.getElementById('signupName').value,
                email: document.getElementById('signupEmail').value,
                password: document.getElementById('signupPassword').value
            };

            fetch(SCRIPT_URL, {
                method: 'POST',
                body: JSON.stringify(data)
            })
            .then(response => response.text())
            .then(result => {
                document.getElementById('message').textContent = result;
                if (result === "Signup successful!") loadUsers();
            });
        });

        // Load users (same as before)
        function loadUsers() {
            fetch(SCRIPT_URL)
                .then(response => response.json())
                .then(users => {
                    const tbody = document.getElementById('usersBody');
                    tbody.innerHTML = '';
                    users.forEach((user, index) => {
                        if (index === 0) return; // Skip header
                        tbody.innerHTML += `<tr>
                            <td>${user[0]}</td>
                            <td>${user[1]}</td>
                            <td>${user[2]}</td>
                        </tr>`;
                    });
                });
        }

        loadUsers(); // Initial load
    </script>
</body>
</html>
